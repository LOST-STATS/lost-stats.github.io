
<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <title>ARMA Models - LOST</title>
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="/assets/css/just-the-docs.css">
    <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script>
  <script type="text/javascript" src="/assets/js/just-the-docs.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>ARMA Models | LOST</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="ARMA Models" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Source code for the Library of Statistical Techniques" />
<meta property="og:description" content="Source code for the Library of Statistical Techniques" />
<meta property="og:site_name" content="LOST" />
<script type="application/ld+json">
{"description":"Source code for the Library of Statistical Techniques","@type":"WebPage","url":"/Time_Series/ARMA-models.html","headline":"ARMA Models","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({ TeX: { equationNumbers: { autoNumber: "AMS" } } });
  </script>
  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS_CHTML">
  </script>
</head>
<body>
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="link" viewBox="0 0 16 16">
      <title>Link</title>
      <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </symbol>
  </svg>
  <div class="page-wrap">
    <div class="side-bar">
      <div class="site-header">
        <a href="" class="site-title lh-tight">
  LOST
</a>
        <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button>
      </div>
      <div class="navigation main-nav js-main-nav">
        <nav role="navigation" aria-label="Main navigation">
  <ul class="navigation-list"><li class="navigation-list-item"><a href="/" class="navigation-list-link">Home</a></li><li class="navigation-list-item active"><a href="/Data/" class="navigation-list-link"></a></li><li class="navigation-list-item"><a href="/Data_Manipulation/data_manipulation.html" class="navigation-list-link">Data Manipulation</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/Data_Manipulation/collapse_a_data_set.html" class="navigation-list-link">Collapse a Data Set</a></li><li class="navigation-list-item "><a href="/Data_Manipulation/Combining_Datasets/combining_datasets_overview.html" class="navigation-list-link">Combining Datasets</a><ul class="navigation-list-child-list"><li class="navigation-list-item ">
                            <a href="/Data_Manipulation/Combining_Datasets/combining_datasets_vertical_combination.html" class="navigation-list-link">Vertical Combination</a>
                          </li><li class="navigation-list-item ">
                            <a href="/Data_Manipulation/Combining_Datasets/combining_datasets_horizontal_merge_deterministic.html" class="navigation-list-link">Horizontal Combination (Deterministic)</a>
                          </li></ul></li><li class="navigation-list-item "><a href="/Data_Manipulation/Creating_Dummy_Variables/creating_dummy_variables.html" class="navigation-list-link">Creating Dummy Variables</a></li><li class="navigation-list-item "><a href="/Data_Manipulation/determine_the_observation_level_of_a_data_set.html" class="navigation-list-link">Determine the Observation Level of a Data Set</a></li><li class="navigation-list-item "><a href="/Data_Manipulation/Reshaping/reshape.html" class="navigation-list-link">Reshaping Data</a><ul class="navigation-list-child-list"><li class="navigation-list-item ">
                            <a href="/Data_Manipulation/Reshaping/reshape_panel_data_from_wide_to_long.html" class="navigation-list-link">Reshape Panel Data from Wide to Long</a>
                          </li><li class="navigation-list-item ">
                            <a href="/Data_Manipulation/Reshaping/reshape_panel_data_from_long_to_wide.html" class="navigation-list-link">Reshape Panel Data from Long to Wide</a>
                          </li></ul></li><li class="navigation-list-item "><a href="/Data_Manipulation/rowwise_calculations.html" class="navigation-list-link">Rowwise Calculations</a></li></ul></li><li class="navigation-list-item"><a href="/Geo-Spatial/Geo-spatial.html" class="navigation-list-link">Geo-Spatial</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/Geo-Spatial/geocoding.html" class="navigation-list-link">Geocoding</a></li><li class="navigation-list-item "><a href="/Geo-Spatial/merging_shape_files.html" class="navigation-list-link">Merging Shape Files</a></li><li class="navigation-list-item "><a href="/Geo-Spatial/spatial_joins.html" class="navigation-list-link">Spatial Joins</a></li></ul></li><li class="navigation-list-item"><a href="/Machine_Learning/Machine_Learning.html" class="navigation-list-link">Machine Learning</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/Machine_Learning/boosted_regression_trees.html" class="navigation-list-link">Boosted Regression Trees</a></li><li class="navigation-list-item "><a href="/Machine_Learning/causal_forest.html" class="navigation-list-link">Causal Forest</a></li><li class="navigation-list-item "><a href="/Machine_Learning/decision_trees.html" class="navigation-list-link">Decision Trees</a></li><li class="navigation-list-item "><a href="/Machine_Learning/penalized_regression.html" class="navigation-list-link">Penalized Regression</a></li><li class="navigation-list-item "><a href="/Machine_Learning/random_forest.html" class="navigation-list-link">Random Forest</a></li></ul></li><li class="navigation-list-item"><a href="/Model_Estimation/Estimation.html" class="navigation-list-link">Model Estimation</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/Model_Estimation/fixed_effects_in_linear_regression.html" class="navigation-list-link">Fixed Effects in Linear Regression</a></li><li class="navigation-list-item "><a href="/Model_Estimation/heckman_correction_model.html" class="navigation-list-link">Heckman Correction Model</a></li><li class="navigation-list-item "><a href="/Model_Estimation/instrumental_variables.html" class="navigation-list-link">Instrumental Variables</a></li><li class="navigation-list-item "><a href="/Model_Estimation/interaction_terms_and_polynomials.html" class="navigation-list-link">Interaction Terms and Polynomials</a></li><li class="navigation-list-item "><a href="/Model_Estimation/linear_hypothesis_tests.html" class="navigation-list-link">Linear Hypothesis Tests</a></li><li class="navigation-list-item "><a href="/Model_Estimation/linear_mixed_effects_regression.html" class="navigation-list-link">Linear Mixed-Effects Regression</a></li><li class="navigation-list-item "><a href="/Model_Estimation/logit_model.html" class="navigation-list-link">Logit Model</a></li><li class="navigation-list-item "><a href="/Model_Estimation/mcfaddens_choice_model.html" class="navigation-list-link">McFadden's Choice Model (Alternative-Specific Conditional Logit)</a></li><li class="navigation-list-item "><a href="/Model_Estimation/ordinary_least_squares.html" class="navigation-list-link">Ordinary Least Squares (Linear Regression)</a></li><li class="navigation-list-item "><a href="/Model_Estimation/probit_model.html" class="navigation-list-link">Probit Model</a></li><li class="navigation-list-item "><a href="/Model_Estimation/random_mixed_effects_estimation.html" class="navigation-list-link">Random/Mixed Effects in Linear Regression</a></li><li class="navigation-list-item "><a href="/Model_Estimation/regression_discontinuity_design.html" class="navigation-list-link">Regression Discontinuity Design</a></li><li class="navigation-list-item "><a href="/Model_Estimation/two_by_two_difference_in_difference.html" class="navigation-list-link">2x2 Difference in Difference</a></li><li class="navigation-list-item "><a href="/Model_Estimation/Nonstandard_Errors/nonstandard_errors.html" class="navigation-list-link">Nonstandard Errors</a><ul class="navigation-list-child-list"><li class="navigation-list-item ">
                            <a href="/Model_Estimation/Nonstandard_Errors/bootstrap_se.html" class="navigation-list-link">Bootstrap Standard Errors</a>
                          </li><li class="navigation-list-item ">
                            <a href="/Model_Estimation/Nonstandard_Errors/clustered_se.html" class="navigation-list-link">Cluster-Robust Standard Errors</a>
                          </li><li class="navigation-list-item ">
                            <a href="/Model_Estimation/Nonstandard_Errors/hc_se.html" class="navigation-list-link">Heteroskedasticity-consistent standard errors</a>
                          </li></ul></li></ul></li><li class="navigation-list-item"><a href="/Presentation/Presentation.html" class="navigation-list-link">Presentation</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/Presentation/formatting_graph_legends.html" class="navigation-list-link">Formatting Graph Legends</a></li><li class="navigation-list-item "><a href="/Presentation/Scatterplots.html" class="navigation-list-link">Scatterplots</a></li><li class="navigation-list-item "><a href="/Presentation/Styling_Scatterplots.html" class="navigation-list-link">Styling Scatterplots</a></li><li class="navigation-list-item "><a href="/Presentation/bar_graphs.html" class="navigation-list-link">Bar Graphs</a></li><li class="navigation-list-item "><a href="/Presentation/density_plots.html" class="navigation-list-link">Denisty Plots</a></li><li class="navigation-list-item "><a href="/Presentation/export_a_formatted_regression_table.html" class="navigation-list-link">Export a Formatted Regression Table</a></li><li class="navigation-list-item "><a href="/Presentation/faceted_graphs.html" class="navigation-list-link">Faceted Graphs</a></li><li class="navigation-list-item "><a href="/Presentation/heatmap_colored_correlation_matrix.html" class="navigation-list-link">Heatmap Colored Correlation Matrix</a></li><li class="navigation-list-item "><a href="/Presentation/histograms.html" class="navigation-list-link">Histograms</a></li><li class="navigation-list-item "><a href="/Presentation/line_graph_with_labels_at_the_beginning_or_end.html" class="navigation-list-link">Line Graph with Labels at the Beginning or End of Lines</a></li><li class="navigation-list-item "><a href="/Presentation/line_graphs.html" class="navigation-list-link">Line Graphs</a></li><li class="navigation-list-item "><a href="/Presentation/marginal_effects_plots_for_interactions_with_continuous_variables.html" class="navigation-list-link">Marginal Effects Plots for Interactions with Continuous Variables</a></li><li class="navigation-list-item "><a href="/Presentation/scatterplot_by_group_on_shared_axes.html" class="navigation-list-link">Scatterplot by Group on Shared Axes</a></li><li class="navigation-list-item "><a href="/Presentation/styling_line_graphs.html" class="navigation-list-link">Styling Line Graphs</a></li></ul></li><li class="navigation-list-item"><a href="/Summary_Statistics/Summary_Statistics.html" class="navigation-list-link">Summary Statistics</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/Summary_Statistics/Balance_Tables.html" class="navigation-list-link">Balance Table</a></li><li class="navigation-list-item "><a href="/Summary_Statistics/Summary_Statistics_Tables.html" class="navigation-list-link">Summary Statistics Tables</a></li></ul></li><li class="navigation-list-item active"><a href="/Time_Series/Time_Series.html" class="navigation-list-link">Time Series</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/Time_Series/AR-models.html" class="navigation-list-link">AR Models</a></li><li class="navigation-list-item  active"><a href="/Time_Series/ARMA-models.html" class="navigation-list-link active">ARMA Models</a></li><li class="navigation-list-item "><a href="/Time_Series/creating_time_series_dataset.html" class="navigation-list-link">Creating Time Series Dataset</a></li></ul></li><li class="navigation-list-item"><a href="/Other/Other.html" class="navigation-list-link">Other</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/Other/create_a_conda_package.html" class="navigation-list-link">Create a Conda Package (Python)</a></li><li class="navigation-list-item "><a href="/Other/get_a_list_of_files.html" class="navigation-list-link">Get a List of Files</a></li><li class="navigation-list-item "><a href="/Other/import_a_foreign_data_file.html" class="navigation-list-link">Import a Foreign Data File</a></li></ul></li><li class="navigation-list-item"><a href="/Desired_Nonexistent_Pages/desired_nonexistent_pages.html" class="navigation-list-link">Desired Nonexistent Pages</a></li><li class="navigation-list-item"><a href="/Contributing/Contributing.html" class="navigation-list-link">Contributing</a></li></ul>
</nav>
      </div>
      <footer class="site-footer">
        <p class="text-small text-grey-dk-000 mb-4">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p>
      </footer>
    </div>
    <div class="main-content-wrap js-main-content" tabindex="0">
      <div class="main-content">
        <div class="page-header js-page-header">
          <div class="search">
            <div class="search-input-wrap">
              <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search LOST" aria-label="Search LOST" autocomplete="off">
              <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg>
            </div>
            <div class="js-search-results search-results-wrap"></div>
          </div>
            <ul class="list-style-none text-small aux-nav">
                <li class="d-inline-block my-0"><a href="https://github.com/lost-stats/lost-stats.github.io/blob/source/Time_Series/ARMA-models.md">Edit this page on GitHub</a></li>
            </ul>
        </div>
        <div class="page">
              <nav class="breadcrumb-nav">
                <ol class="breadcrumb-nav-list">
                    <li class="breadcrumb-nav-list-item"><a href="/Time_Series/Time_Series.html">Time Series</a></li>
                  <li class="breadcrumb-nav-list-item"><span>ARMA Models</span></li>
                </ol>
              </nav>
          <div id="main-content" class="page-content" role="main">
              <h1 id="autoregressive-moving-average-arma-models">
          <a href="#autoregressive-moving-average-arma-models" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Autoregressive Moving-Average (ARMA) Models
      </h1>
<p>Auto regressive moving average (ARMA) models are a combination of two commonly used time series processes, the <a href="https://lost-stats.github.io/Time_Series/AR-models.html">autoregressive (AR)</a> process and the <a href="https://lost-stats.github.io/Time_Series/MA-models.html">moving-average (MA)</a> process. As such, ARMA models have the form</p>
<script type="math/tex; mode=display">Y_t = c + \sum_{i = 1}^{p} \beta_i Y_{t-i} + \sum_{j = 1}^{q} \theta_j \varepsilon_{t-j} + \varepsilon_t</script>
<p>If an ARMA model has an AR component of order <script type="math/tex">p</script> and an MA component of order <script type="math/tex">q</script>, then the model is commonly refered to as an <script type="math/tex">ARMA(p,q)</script></p>
<p>For additional information, see <a href="https://en.wikipedia.org/wiki/Autoregressive%E2%80%93moving-average_model">Wikipedia: Autoregressive Moving-Average model</a>.</p>
      <h1 id="keep-in-mind">
          <a href="#keep-in-mind" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Keep In Mind
      </h1>
<ul>
  <li>Data must be properly formatted for estimation as a time-series. See <a href="https://lost-stats.github.io/Time_Series/creating_time_series_dataset.html">creating a time series data set</a>. If this is not done, then depending on your statistical package of choice, either your estimation will fail to execute or you will receive erroneous output.</li>
  <li>ARMA models include some number of lagged error terms from the MA component, which are inherently unobservable. Consequently these models cannot be estimated using OLS alone, unlike AR models.</li>
  <li>ARMA models are most commonly estimated using maximum likelihood estimation (MLE). One consequence of this is that, given some time series and some specified order <script type="math/tex">(p,q)</script>, the estimates obtained from the estimated <script type="math/tex">ARMA(p,q)</script> model will vary depending on the type of MLE estimation used.</li>
  <li>As is the case in many situations where one is trying to estimate a time-series process, model selection is important. For ARMA models, model selection meaning chosing the number of AR and MA parameters, the <script type="math/tex">p</script> and <script type="math/tex">q</script>, for which a coefficient will be estimated. In practice, it is common to estimate several different potential models, then use some criterion to determine which model best fits the time-series. Common criteria used to evaluate ARMA models are the Akaike Information Criterion (AIC) and the Bayesian Information Criterion (BIC), also referred to as the Schwarz Information Criterion (SIC). For more information on these and other model selection criteria, see <a href="https://en.wikipedia.org/wiki/Model_selection#Criteria">Wikipedia: Model Selection</a>.</li>
  <li>Estimating a time series using an ARMA model relies on two assumptions. The first is the standard assumption that we have selected the correct functional form for the time series. In this case, that means assuming that we have selected the correct <script type="math/tex">p</script> and <script type="math/tex">q</script>. Second, we also have to assume that our time series is stationary. For a discussion of the stationarity assumption and what constraints this assumption imposes on our model, again see <a href="https://en.wikipedia.org/wiki/Autoregressive%E2%80%93moving-average_model">Wikipedia: Autoregressive Moving-Average model</a>.</li>
</ul>
      <h1 id="also-consider">
          <a href="#also-consider" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Also Consider
      </h1>
<ul>
  <li>ARMA models can only be estimated for univariate time series. If you are interested in estimating a time series process using multiple time series on the right hand side of your model, consider using a <a href="https://lost-stats.github.io/Time_Series/VAR-models.html">vector AR (VAR)</a> model or a <a href="https://lost-stats.github.io/Time_Series/VARMA-models.html">VARMA</a> model.</li>
  <li>Before estimating an ARMA model, it is standard practice to try to determine whether or not the time series appears to be stationary. See <a href="https://lost-stats.github.io/Time_Series/Stationarity-and-weak-dependence.html">LOST: Stationarity and Weak Dependence</a> for more details.</li>
  <li>If the time series you are trying to estimate does not appear to be stationary, then using an ARMA model to estimate the series is innappropriate. For simpler forms of nonstationarity, an ARIMA model may be useful. An <script type="math/tex">ARIMA(p,d,q)</script> model is a more general model for a time-series than an <script type="math/tex">ARMA(p,q)</script>. In these models, <script type="math/tex">p</script> still signifies an <script type="math/tex">AR(p)</script> component, and <script type="math/tex">q</script> an <script type="math/tex">MA(q)</script> component. For more information on ARIMA models, see <a href="https://en.wikipedia.org/wiki/Autoregressive_integrated_moving_average">Wikipedia: ARIMA</a>. For information about estimating an ARIMA model, see <a href="https://lost-stats.github.io/Time_Series/ARIMA-models.html">LOST: ARIMA models</a></li>
</ul>
      <h1 id="implementations">
          <a href="#implementations" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Implementations
      </h1>
<p>First, follow the <a href="https://lost-stats.github.io/Time_Series/creating_time_series_dataset.html">instructions</a> for creating and formatting time-series data using your software of choice. We will again use quarterly US GDP data downloaded from <a href="https://fred.stlouisfed.org/series/GDPC1">FRED</a> as an example. This time, though, we will try to estimate the quarterly log change in GDP with an <script type="math/tex">ARMA(3,1)</script> process. Note that an <script type="math/tex">ARMA(3,1)</script> model is almost certainly not the best way to estimate this time series, and is used here solely as an example.</p>
      <h2 id="r">
          <a href="#r" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> R
      </h2>
<p>There are numerous packages to estimate ARMA models in R. For this tutorial, we will use the <code class="highlighter-rouge">arima()</code> function, which comes preloaded into R from the <strong>stats</strong> package. For our purposes, it is sufficient to note that estimating an <script type="math/tex">ARIMA(p,0,q)</script> model is largely equivalent to estimating an <script type="math/tex">ARMA(p,q)</script>. For more information about estimating a true ARIMA process (where <script type="math/tex">d>0</script>), see the <em>Also Consider</em> section above. Additionally, the <strong>tsibble</strong> package can also be used to easily construct our quarterly log change in GDP variable.</p>
<p>The <code class="highlighter-rouge">arima()</code> function does require that we specify the order of the model (ie, pick the values of <script type="math/tex">p</script> and <script type="math/tex">q</script>). For an alternative function that will evaluate multiple models and select the best performing, see the <code class="highlighter-rouge">auto.arima</code> function available through the <a href="https://www.rdocumentation.org/packages/forecast/versions/8.11/topics/auto.arima"><strong>forecast</strong> package</a>.</p>
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## Load and install time series packages</span><span class="w">
</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">require</span><span class="p">(</span><span class="s2">"tsibble"</span><span class="p">))</span><span class="w"> </span><span class="n">install.packages</span><span class="p">(</span><span class="s2">"tsibble"</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">tsibble</span><span class="p">)</span><span class="w">


</span><span class="c1">#load data</span><span class="w">
</span><span class="n">gdp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"https://github.com/LOST-STATS/lost-stats.github.io/raw/source/Time_Series/Data/GDPC1.csv"</span><span class="p">)</span><span class="w">

</span><span class="c1">#set our data up as a time-series</span><span class="w">
</span><span class="n">gdp</span><span class="o">$</span><span class="n">DATE</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.Date</span><span class="p">(</span><span class="n">gdp</span><span class="o">$</span><span class="n">DATE</span><span class="p">)</span><span class="w">

</span><span class="n">gdp_ts</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as_tsibble</span><span class="p">(</span><span class="n">gdp</span><span class="p">,</span><span class="w">
                     </span><span class="n">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DATE</span><span class="p">,</span><span class="w">
                     </span><span class="n">regular</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
    </span><span class="n">index_by</span><span class="p">(</span><span class="n">qtr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">yearquarter</span><span class="p">(</span><span class="n">.</span><span class="p">))</span><span class="w">

</span><span class="c1">#construct our first difference of log gdp variable</span><span class="w">
</span><span class="n">gdp_ts</span><span class="o">$</span><span class="n">lgdp</span><span class="o">=</span><span class="nf">log</span><span class="p">(</span><span class="n">gdp_ts</span><span class="o">$</span><span class="n">GDPC1</span><span class="p">)</span><span class="w">

</span><span class="n">gdp_ts</span><span class="o">$</span><span class="n">ldiffgdp</span><span class="o">=</span><span class="n">difference</span><span class="p">(</span><span class="n">gdp_ts</span><span class="o">$</span><span class="n">lgdp</span><span class="p">,</span><span class="w"> </span><span class="n">lag</span><span class="o">=</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">difference</span><span class="o">=</span><span class="m">1</span><span class="p">)</span><span class="w">


</span><span class="c1">#Estimate our ARMA(3,1)</span><span class="w">
</span><span class="c1">##Note that because we are modeling for the first difference of log GDP, we cannot use our first observation of </span><span class="w">
</span><span class="c1">##log GDP to estimate our model.</span><span class="w">
</span><span class="n">arma_gdp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">arima</span><span class="p">(</span><span class="n">gdp_ts</span><span class="o">$</span><span class="n">lgdp</span><span class="p">[</span><span class="m">2</span><span class="o">:</span><span class="m">292</span><span class="p">],</span><span class="w"> </span><span class="n">order</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="m">3</span><span class="p">,</span><span class="m">0</span><span class="p">,</span><span class="m">1</span><span class="p">))</span><span class="w">
</span><span class="n">arma_gdp</span><span class="w">
</span></code></pre></div></div>
      <h2 id="stata">
          <a href="#stata" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Stata
      </h2>
<p>In Stata we will again estimate an <script type="math/tex">ARMA(p,q)</script> by estimating an <script type="math/tex">ARIMA(p,0,q)</script> using the Stata command <code class="highlighter-rouge">arima</code>. This command works similarly to Stataâ€™s <code class="highlighter-rouge">reg</code> command. For information about the specific estimation procedure used by this function, optional arguments, etc, see <a href="https://www.stata.com/manuals13/tsarima.pdf">Stata: ARIMA manual</a></p>
<div class="language-stata highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">*load data
</span><span class="err">
import</span> <span class="err">delimited</span> <span class="s2">"https://github.com/LOST-STATS/lost-stats.github.io/raw/source/Time_Series/Data/GDPC1.csv"</span><span class="err">
</span><span class="c1">
*Generate the new date variable
</span><span class="err">
generate</span> <span class="err">date_index</span> <span class="o">=</span> <span class="err">tq(1947q1)</span> <span class="o">+</span> <span class="err">_n</span><span class="o">-</span><span class="err">1
</span><span class="c1">
*Index the date variable as quarterly
</span><span class="err">
format</span> <span class="err">date_index</span> <span class="err">%tq
</span><span class="c1">
*Convert a variable into time-series data
</span><span class="err">tsset</span> <span class="err">date_index
</span><span class="c1">
*construct our first difference of log gdp variable
</span><span class="err">
gen</span> <span class="err">lgdp</span> <span class="o">=</span> <span class="err">ln(gdpc1)
gen</span> <span class="err">dlgdp</span> <span class="o">=</span> <span class="err">D.lgdp
</span><span class="c1">
*Specify the ARMA model using the arima command
*Stata will automatically drop the first entry, since we do not have a value for the first difference of GDP 
*for this entry.
</span><span class="err">
arima</span> <span class="err">dlgdp,</span> <span class="err">arima(3,0,1)

</span></code></pre></div></div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
